function Note(e,c,a,d){this.id=e;this.timeout=null;this.notation_scale=c;this.default_note=a;this.already_post=d;var b=this;jQuery("#notation-"+b.id+" .stars").mouseover(function(){clearTimeout(b.timeout);b.timeout=null});jQuery("#notation-"+b.id+" .stars").mouseout(function(){if(b.timeout==null){b.timeout=window.setTimeout(function(){b.change_picture_status(b.default_note)},50)}});jQuery("#notation-"+b.id+" .stars .star").click(function(){var f=this.id.replace(/star-([0-9]+)-([0-9]+)/g,"$2");b.send_request(f)});jQuery("#notation-"+b.id+" .stars .star").mouseover(function(){var f=this.id.replace(/star-([0-9]+)-([0-9]+)/g,"$2");b.change_picture_status(f)})}Note.prototype={send_request:function(b){var c=this.id;var a=this;if(NOTATION_USER_CONNECTED==0){alert(NOTATION_LANG_AUTH)}else{jQuery("#notation-"+c+" .stars").after('<i id="loading-'+c+'" class="fa fa-spinner fa-spin"></i>');jQuery.ajax({url:"",type:"post",data:{note:b,id:c,token:TOKEN},success:function(){jQuery("#loading-"+c).remove();if(a.already_post==1){alert(NOTATION_LANG_ALREADY_VOTE)}else{a.default_note=b;a.already_post=1;a.change_picture_status(b);a.change_nbr_note()}}})}},change_picture_status:function(e){var c;var a;for(var b=1;b<=this.notation_scale;b++){var d="star-"+this.id+"-"+b;a=b-e;if(a>=1){c="fa star star-hover fa-star-o"}else{if(a<=0.5&&a>0){c="fa star star-hover fa-star-half-o"}else{if(e>=b){c="fa star star-hover fa-star"}}}if(jQuery("#"+d)){jQuery("#"+d)[0].className=c}}},change_nbr_note:function(){var b=jQuery("#notation-"+this.id+" span.number-notes").first();var a=parseInt(b.text())+1;b.text(a);jQuery("#notation-"+this.id+" .notes span:not(.number-notes)").text((a>1?NOTATION_LANG_NOTES:NOTATION_LANG_NOTE))}};